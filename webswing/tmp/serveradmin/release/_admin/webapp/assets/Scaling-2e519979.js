var x=Object.defineProperty;var S=(l,a,s)=>a in l?x(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s;var g=(l,a,s)=>(S(l,typeof a!="symbol"?a+"":a,s),s);import{R as m,j as t,o as _,r as h,u as C,c as R}from"./vendor-95b30d29.js";import{Q as d,$ as b,V as v,u as F,k as $,F as y,B as j,L as k,E as B}from"./index-61e14e01.js";import{F as V}from"./formium-7b85afc3.js";const w="_btnstab_1hc9j_1",A="_headerRow_1hc9j_5",N="_rightSpace_1hc9j_11",T="_floatingButtons_1hc9j_15",E="_activeApply_1hc9j_28",c={btnstab:w,headerRow:A,rightSpace:N,floatingButtons:T,activeApply:E},D="_root_100g2_1",I={root:D};class U extends m.Component{constructor(s){super(s);g(this,"formiumRef",m.createRef());g(this,"form")}componentDidMount(){setTimeout(()=>{this.form=new V({target:this.formiumRef.current,props:{value:this.props.value,list:this.props.list,readonly:this.props.readonly,identify:this.props.identify,hiddenConfigFields:this.props.hide||[],translations:this.props.translations,lang:this.props.lang}}),this.form.$on("requestUpdate",s=>{d.scalingStore.onRequestUpdate()}),this.form.$on("configChange",s=>{d.scalingStore.compareConfig()}),this.form.$set({onVariableSearch:(s,i)=>{const e=i,o=e.substr(e.lastIndexOf("$"),e.length),n=o.substr(0,0)+o.substr(0+2);return b.getVariables(s,n).then(r=>r)}}),this.form.$set({onVariableResolve:(s,i)=>{const e=i;return b.resolveVariable(s,e).then(o=>{let n="";if(!o||o===null)return n;if(Object.keys(o).length>1){n+='<ul class="var-res-list">';for(const p in o)n+="<li>"+v(p)+"</li>";n+="</ul>"}else n+=v(Object.keys(o)[0]);return n})}})},10)}componentDidUpdate(s){var i;(i=this.form)==null||i.$set({readonly:this.props.readonly,value:this.props.value,list:this.props.list,identify:this.props.identify,hide:this.props.hide,translations:this.props.translations,lang:this.props.lang})}componentWillUnmount(){this.form&&this.form.$destroy()}render(){return t.jsx("div",{className:I.root,id:this.props.identify,ref:this.formiumRef})}}const H=_(()=>{var u;const{permissionsStore:l,globalStore:a,scalingStore:s,logsStore:i}=F(),[e,o]=h.useState("logs"),{t:n,i18n:r}=C();h.useEffect(()=>(s.loadConfig(),a.updateApp(""),p(e),()=>{s.clearConfigData()}),[]);const p=h.useCallback(f=>{o(f),f==="logs"?i.refresh("/","scaling"):i.clearInterval()},[o]);return $(r.t("routes.scaling")),t.jsxs(t.Fragment,{children:[t.jsx(y,{className:c.headerRow,justifyContent:"space-between",alignItems:"center",children:t.jsxs(y,{className:c.btnstab,children:[t.jsx(j,{className:c.rightSpace,icon:"list",active:e==="logs",onClick:()=>p("logs"),children:n("scaling.logs")}),t.jsx(j,{className:c.rightSpace,icon:"timer",active:e==="config",onClick:()=>p("config"),children:n("scaling.config")})]})}),e==="logs"&&t.jsx(t.Fragment,{children:t.jsx(k,{className:c.tableHeight,type:"scaling",app:"/"})}),e==="config"&&t.jsxs(t.Fragment,{children:[t.jsx(U,{readonly:!l.get("configEdit"),identify:"scalingConfig",value:s.config,translations:(u=r.getDataByLanguage(r.language))==null?void 0:u.translation,lang:r.language}),t.jsx(B,{className:R(c.floatingButtons,{[c.activeApply]:s.activeApply}),buttons:[{label:r.t("Apply"),size:"small",color:"blue",onClick:()=>s.setConfig()},{label:r.t("Reset"),size:"small",color:"white",onClick:()=>s.resetConfig()}]})]})]})});export{H as default};
//# sourceMappingURL=Scaling-2e519979.js.map
