import{o as T,s as j,u as S,H as I,r as w,j as s,c as h}from"./vendor-95b30d29.js";import{u as L,p as N,k as y,x as a,F as A,H as W,n as F,v as H,h as K,f as g,Z as k,U as D,t as E,s as p,I as R}from"./index-61e14e01.js";const U=T(()=>{const{sessionsStore:r,logsStore:t,globalStore:C}=L(),x=j(),{t:l}=S(),{app:i}=I(),f=w.useCallback(e=>{x.push(`/logs/session/${i}/${e.rowData.instanceId}/${encodeURIComponent(e.rowData.sessionPoolId)}`)},[i,x]);N(),w.useEffect(()=>(C.updateApp(i),t.loadLogsOverview(i),r.setAppPath(i),r.refresh(),()=>r.clearInterval()),[i]),y(l("routes.logs")+" - "+i);const d=r.sessions.sessions,u=r.sessions.closedSessions;let o;o=d!=null&&d.length?[...d]:void 0,u!=null&&u.length&&(o=o!=null&&o.length?[...o,...u]:void 0);let c=t.appInstanceIds.map(e=>{const n=o==null?void 0:o.filter(m=>m.id===e.instanceId)[0];return{...e,...n}});c=t.searchTerm?c==null?void 0:c.filter(e=>{var n,m,b;return((n=e.instanceId)==null?void 0:n.toLowerCase().includes(t.searchTerm.toLocaleLowerCase()))||((m=e.user)==null?void 0:m.toLowerCase().includes(r.searchTerm.toLocaleLowerCase()))||((b=e.status)==null?void 0:b.toLowerCase().includes(r.searchTerm.toLocaleLowerCase()))}):c;const v=e=>{t.setSearchTerm(e.target.value)};return s.jsxs("div",{className:a.root,children:[s.jsxs(A,{justifyContent:"space-between",alignItems:"center",children:[s.jsx(W,{variant:"h2",title:l("logs.chooseAppInst")}),!t.filterToggle&&s.jsx(F,{color:"neutral",icon:"search",onClick:()=>t.setFilterToggle()}),t.filterToggle&&s.jsx(H,{value:t.searchTerm,onChange:v,onClose:()=>t.setFilterToggle()})]}),s.jsx("div",{className:a.scrollx,children:s.jsx(K,{collection:c,minTableWidth:1200,bLoading:t.loading,rowHeight:60,threshold:500,className:a.vTable,sortBy:"lastModified",sortDirection:"DESC",columns:[{label:l("sessions.plural"),dataKey:"instanceId",minWidth:386,align:"start",bSort:!0,className:a.pointer,component:e=>s.jsx("div",{className:h(g.wCell,a.statusAlign),children:s.jsx(k,{text:e})})},{dataKey:"user",label:l("logs.user"),minWidth:100,align:"start",bSort:!0,component:(e,n)=>s.jsx(D,{session:n})},{dataKey:"status",label:l("general.status"),align:"start",minWidth:100,bSort:!0,className:a.pointer,component:(e,n)=>s.jsx(E,{session:n})},{dataKey:"startedAt",label:l("sessions.startTime"),minWidth:135,align:"start",bSort:!0,className:a.pointer,component:e=>s.jsx("div",{className:h(g.wCell,a.statusAlign),children:p(Number(e))})},{dataKey:"endedAt",label:l("sessions.endTime"),minWidth:135,align:"start",bSort:!0,className:a.pointer,component:e=>s.jsx("div",{className:h(g.wCell,a.statusAlign),children:p(Number(e))})},{label:l("overview.lastModified"),dataKey:"lastModified",minWidth:250,align:"start",bSort:!0,component:e=>s.jsxs("span",{className:a.fullWColl,children:[p(Number(e)),s.jsx(R,{name:"arrow_forward_ios"})]})}],onRowClick:f})})]})});export{U as default};
//# sourceMappingURL=LogsInstancesList-0c25d9ff.js.map
