import{o as h,s as v,j as e,H as C,u as I,r as m}from"./vendor-95b30d29.js";import{u as w,F as g,x as l,H as x,D as f,n as c,I as S,v as k,k as L,y as T,L as b,z as y}from"./index-61e14e01.js";const u=h(({title:s,dropdownLabel:i,buttons:o,onDownloadClick:t,type:n})=>{const{logsStore:a}=w(),r=v(),p=d=>{a.setSearchTerm(d.target.value)};return e.jsxs(g,{className:l.headingRow,justifyContent:"space-between",flexWrap:"wrap",children:[a.isCluster&&o&&o.length>1?e.jsxs(g,{children:[e.jsx(x,{className:l.pr2,variant:"h2",title:`${i}:`}),e.jsx(f,{className:l.dropdown,color:"neutral",size:"medium",buttons:o,active:s})]}):a.isCluster?e.jsx(x,{variant:"h2",title:i?`${i}: ${s}`:s,className:l.mb2}):e.jsxs(g,{alignItems:"center",spacing:1,children:[n==="session"&&e.jsx(c.UI,{onClick:()=>r.goBack(),children:e.jsx(S,{name:"arrow_back"})}),e.jsx(x,{variant:"h2",title:s,className:l.mb2})]}),e.jsxs(g,{spacing:2,alignItems:"center",children:[n!=="audit"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{icon:"zoom_out",onClick:()=>{a.adjustFontSize(-.1)}}),e.jsx(c,{icon:"zoom_in",onClick:()=>{a.adjustFontSize(.1)}})]}),e.jsx(c,{icon:"cloud_download",onClick:t}),!a.filterToggle&&e.jsx(c,{color:"neutral",icon:"search",onClick:()=>a.setFilterToggle()}),a.filterToggle&&e.jsx(k,{value:a.searchTerm,onChange:p,onClose:()=>a.setFilterToggle()})]})]})}),z=h(()=>{var d,j;const{logsStore:s,globalStore:i}=w(),{type:o,app:t,id:n,spId:a}=C(),{t:r}=I(),p=()=>{y(s.logsOverview).isEmpty()?s.loadLogsOverview(t).then(()=>{s.refresh(t,o)}):s.refresh(t,o)};return L(r("routes.logs")+" - "+o),m.useEffect(()=>{i.updateApp(t)},[t]),m.useEffect(()=>(s.setType(o),o==="session"&&t&&n?(s.setInstanceId(n),s.setSessionSpLogId(a)):s.setInstanceId(""),p(),()=>s.clearInterval()),[o,n,a]),e.jsxs("div",{className:l.root,children:[((d=s.type)==null?void 0:d.url)==="admin"&&e.jsx(u,{title:r("logs.adminConsoleMessages"),type:o,onDownloadClick:()=>s.downloadLogs(o)}),(o==="audit"||o==="server")&&e.jsx(u,{title:s.isCluster?s.serverLogId:r(`logs.${o}Messages`),buttons:s.dropdownServerButtons,dropdownLabel:r("logs.clusterServer"),type:o,onDownloadClick:()=>s.downloadLogs(o)}),((j=s.type)==null?void 0:j.url)==="sessionpool"&&e.jsx(u,{title:s.spLogId,buttons:s.dropdownSpButtons,dropdownLabel:r("logs.sp"),type:o,onDownloadClick:()=>s.downloadLogs(o)}),o==="session"&&n&&e.jsx(u,{back:!0,title:r("logs.appInst")+" "+n+" "+r("logs.msgs"),type:o,onDownloadClick:()=>s.downloadSessionLogs(T("",t),s.spLogId,n)}),e.jsx(b,{type:o,app:t,id:n})]})});export{z as default};
//# sourceMappingURL=Logs-d911345d.js.map
