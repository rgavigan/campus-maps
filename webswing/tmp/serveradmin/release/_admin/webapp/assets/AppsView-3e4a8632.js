import{j as s,c as _,n as C,o as S,s as T,u as N,r as d}from"./vendor-95b30d29.js";import{u as v,C as y,k as A,F as j,n as h,v as k,g as W,e as L,h as V,i as x,D as F,I as P,j as I}from"./index-61e14e01.js";import{P as K}from"./PageHeader-c1f22813.js";import{G as b,c as D}from"./Overview.module-c4ab1fc0.js";import{c as t}from"./Applications.module-90b26cc5.js";import{A as E}from"./AvatarWithTitle-90e4e708.js";const H="_root_jfl1u_1",R="_white_jfl1u_9",B="_neutral_jfl1u_12",G="_primary_jfl1u_15",z="_success_jfl1u_18",O="_warning_jfl1u_21",U="_danger_jfl1u_24",f={root:H,white:R,neutral:B,primary:G,success:z,warning:O,danger:U},m=({color:a="primary",className:o})=>s.jsx("div",{className:_(f.root,f[a],o)}),w=({title:a,subtitle:o,src:c,icon:r,openUrl:u,status:l,path:i,className:p})=>{const{globalStore:e}=v();return s.jsx(y,{className:_(t.appsWidget,p),children:s.jsxs(C,{to:i,children:[s.jsx(E,{src:c,icon:r,title:a,subtitle:o,className:t.latestNews,classes:{subtitle:t.subtitle,avatar:t.avatar},onCLick:u}),l&&s.jsxs(s.Fragment,{children:[e.countStatuses(l,"Running")?s.jsx(m,{color:"success",className:t.statusPoint}):null,e.countStatuses(l,"Stopped")?s.jsx(m,{color:"warning",className:t.statusPoint}):null,e.countStatuses(l,"Error")?s.jsx(m,{color:"danger",className:t.statusPoint}):null]})]})})},Y=S(()=>{var p;const{configStore:a,globalStore:o}=v(),c=T(),{t:r}=N(),u=d.useCallback(e=>{c.push("apps"+e.rowData.path)},[c]),l=e=>{c.push(e)},i=a.searchTerm?(p=o.paths)==null?void 0:p.filter(e=>{var n,g;return((n=e.path)==null?void 0:n.toLowerCase().includes(a.searchTerm.toLocaleLowerCase()))||((g=e.name)==null?void 0:g.toLowerCase().includes(a.searchTerm.toLocaleLowerCase()))}):o.paths;return A(r("routes.apps")),d.useEffect(()=>{o.updateApp(),o.loadInfo(),o.toggleAddApp&&o.setToggleAddApp(!1)},[]),s.jsxs(s.Fragment,{children:[s.jsx(w,{className:t.serverWidth,icon:"dns",title:r("config.type",{type:"Server"}),path:"overview/server-config"}),s.jsxs(j,{justifyContent:"space-between",alignItems:"center",children:[s.jsx(K,{title:r("routes.apps")}),s.jsxs(j,{spacing:2,children:[s.jsx(h,{icon:"apps",color:a.appView==="grid"?"blue":"neutral",onClick:()=>a.setAppView("grid")}),s.jsx(h,{icon:"list",color:a.appView==="table"?"blue":"neutral",onClick:()=>a.setAppView("table")}),!a.filterToggle&&s.jsx(h,{color:"neutral",icon:"search",onClick:()=>a.setFilterToggle()}),a.filterToggle&&s.jsx(k,{value:a.searchTerm,onChange:e=>a.setSearchTerm(e.target.value),onClose:()=>a.setFilterToggle()})]})]}),s.jsxs("div",{className:W.wTabContent,children:[a.appView==="grid"&&s.jsx(b,{container:!0,spacing:"sm",children:i==null?void 0:i.map(e=>s.jsx(b,{item:!0,xs:12,sm:6,md:4,lg:3,children:s.jsx(w,{status:e.status,src:L+e.path+"/rest/appicon",title:e.name,subtitle:e.path,path:"apps"+e.path})},e.path))}),a.appView==="table"&&s.jsx("div",{className:D.table,children:s.jsx(V,{columns:[{dataKey:"name",width:35,align:"start",label:"",className:x.actionCell,component:(e,n)=>s.jsx(F,{className:x.actionCellDropdown,buttons:[{label:r("Config"),icon:"list_alt",onClick:()=>l("apps"+n.path)},{label:r("Sessions"),icon:"groups",onClick:()=>l("sessions"+n.path)}],children:s.jsx(P,{name:"more_vert"})})},{label:r("apps.name"),dataKey:"name",minWidth:100,align:"start",bSort:!0,component:(e,n)=>s.jsx(C,{className:t.cell,to:"/apps"+n.path,children:e})},{label:r("apps.path"),dataKey:"path",minWidth:100,align:"start",bSort:!0,component:(e,n)=>s.jsx("a",{className:t.cell,href:n==null?void 0:n.url,target:"_blank",rel:"noreferrer",children:e})},{label:r("apps.running"),dataKey:"runningInstances",minWidth:100,align:"start",bSort:!0},{label:r("general.status"),dataKey:"status",minWidth:100,align:"start",bSort:!0,component:e=>s.jsx(I,{status:e})}],minTableWidth:435,rowHeight:60,threshold:500,rowClassName:t.ac,onRowDoubleClick:u,collection:i,className:t.tableHeight})})]})]})});export{Y as default};
//# sourceMappingURL=AppsView-3e4a8632.js.map
